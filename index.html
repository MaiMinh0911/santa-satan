<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Santa & Satan Story Game</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    color: #fff;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(180deg, #0a1a3f, #1a3c6e);
    overflow: hidden;
  }

  .snowflake {
    position: fixed;
    top: -10px;
    color: #ffffffaa;
    font-size: 1em;
    user-select: none;
    animation: fall linear infinite;
  }

  @keyframes fall {
    0% { transform: translateY(-10vh) translateX(0); opacity: 1; }
    100% { transform: translateY(110vh) translateX(var(--deltaX)); opacity: 0; }
  }

  .container {
    text-align: center;
    background: rgba(0,0,0,0.4);
    padding: 30px;
    border-radius: 15px;
    width: 90%;
    max-width: 420px;
  }

  .form-row { display: flex; flex-direction: column; align-items: flex-start; margin-bottom: 15px; width: 100%; }
  label { margin-bottom: 5px; font-weight: bold; font-size: 16px; text-align: left; }
  input, select, button { padding: 12px; font-size: 16px; width: 100%; border-radius: 10px; border: none; box-sizing: border-box; }
  select { color: #000; background: #f2f2f2; }
  button { cursor: pointer; font-weight: bold; margin-top: 12px; }

  #setupScreen button { background: #ff3b3b; color: #fff; }
  #hiddenScreen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0a1a3f; color: white; font-size: 30px; align-items: center; justify-content: center; flex-direction: column; padding: 20px; }

  #starCover { font-size: 36px; margin-bottom: 20px; }
  #roleDisplay { display:none; margin-top:20px; font-size: 24px; }
  #revealButton, #nextPlayerBtn, #restartBtn { margin-top: 20px; padding: 12px; border-radius: 10px; border: none; font-size: 18px; }
  #revealButton { background: #4caf50; color: white; }
  #nextPlayerBtn { background: #2196f3; color: white; }
  #restartBtn { background: #ff9800; color: white; }
</style>
</head>
<body>
<div id="snowContainer"></div>

<div class="container" id="setupScreen">
  <h2>üéÑ Santa & Satan üéÑ</h2>
  <div class="form-row">
    <label for="playerCount">Number of players:</label>
    <input type="number" id="playerCount" min="3" max="10" value="3" />
  </div>
  <button onclick="startGame()">Start Game</button>
</div>

<div id="hiddenScreen" style="display:flex; flex-direction:column; align-items:center;">
  <div id="starCover">‚≠ê‚≠ê‚≠ê Tap to Reveal Role ‚≠ê‚≠ê‚≠ê</div>
  <button id="revealButton" onclick="revealRole()">Reveal</button>
  <div id="roleDisplay"></div>
  <button id="nextPlayerBtn" onclick="nextPlayer()">Next Player</button>
  <button id="restartBtn" onclick="restartGame()">Restart Game</button>
</div>

<script>
const prompts = [
  "The funniest thing that happened to you while celebrating Christmas abroad",
  "A time you misunderstood a local Christmas tradition",
  "The weirdest Christmas food you‚Äôve tried this year",
  "A gift you bought or received that totally backfired",
  "Your most awkward moment in a German Christmas market",
  "The first Christmas snow moment that surprised you",
  "Your favorite cheap Christmas treat you discovered here",
  "A cultural difference that made your Christmas unique",
  "The nicest thing someone did for you this Christmas abroad",
  "Your funniest moment sharing Christmas with roommates or classmates",
  "If Santa/Satan came to our city, what would they do first?",
  "A magical Christmas item you wish existed this year",
  "Invent a new Christmas tradition for students abroad",
  "Your dream Christmas snack mashup",
  "A small win you had this year that made your holiday feel special"
];

let totalPlayers = 0;
let currentPlayer = 1;
let roles = [];
let currentPrompt = "";

function startGame() {
  totalPlayers = parseInt(document.getElementById('playerCount').value);
  if (!totalPlayers || totalPlayers < 3 || totalPlayers > 10) return alert("Players must be between 3 and 10!");

  roles = Array(totalPlayers).fill("Santa");
  const satanIndex = Math.floor(Math.random() * totalPlayers);
  roles[satanIndex] = "Satan";

  currentPrompt = prompts[Math.floor(Math.random() * prompts.length)];

  document.getElementById('setupScreen').style.display = 'none';
  document.getElementById('hiddenScreen').style.display = 'flex';
  resetHidden();
}

function resetHidden() {
  document.getElementById('roleDisplay').style.display = 'none';
  document.getElementById('nextPlayerBtn').style.display = 'none';
  document.getElementById('restartBtn').style.display = 'none';
  document.getElementById('starCover').style.display = 'block';
  document.getElementById('revealButton').style.display = 'block';
}

function revealRole() {
  const roleDisplay = document.getElementById('roleDisplay');
  roleDisplay.style.display = 'block';
  document.getElementById('starCover').style.display = 'none';
  document.getElementById('revealButton').style.display = 'none';

  if (roles[currentPlayer-1] === "Satan") {
    roleDisplay.innerHTML = `üëπ You are SATAN!<br><br>Lie about the prompt:<br><strong>${currentPrompt}</strong>`;
  } else {
    roleDisplay.innerHTML = `üéÖ You are SANTA!<br><br>Tell a story about:<br><strong>${currentPrompt}</strong>`;
  }

  if (currentPlayer < totalPlayers) {
    document.getElementById('nextPlayerBtn').style.display = 'block';
  } else {
    document.getElementById('restartBtn').style.display = 'block';
  }
}

function nextPlayer() {
  currentPlayer++;
  resetHidden();
}

function restartGame() {
  location.reload();
}

// Snow effect
function createSnowflake() {
  const snow = document.createElement('div');
  snow.className = 'snowflake';
  snow.textContent = '‚ùÑ';
  snow.style.left = Math.random() * 100 + 'vw';
  snow.style.fontSize = (Math.random() * 10 + 10) + 'px';
  const duration = (Math.random() * 5 + 5) + 's';
  snow.style.animationDuration = duration;
  const deltaX = (Math.random() * 40 - 20) + 'px';
  snow.style.setProperty('--deltaX', deltaX);
  document.body.appendChild(snow);
  setTimeout(() => snow.remove(), parseFloat(duration)*1000);
}
setInterval(createSnowflake, 200);
</script>
</body>
</html>
